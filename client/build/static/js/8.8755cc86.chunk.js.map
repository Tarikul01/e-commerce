{"version":3,"sources":["store/actions/orderActions.js","../node_modules/react-bootstrap/esm/Table.js","screens/OrderListScreen.js"],"names":["createOrder","order","dispatch","getState","a","type","ORDER_CREATE_REQUEST","config","headers","Authorization","userLogin","userInfo","token","axios","post","response","ORDER_CREATE_SUCCESS","payload","data","ORDER_CREATE_FAIL","message","getOrderDetails","id","ORDER_DETAILS_REQUEST","get","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAIL","payOrder","orderId","paymentResult","ORDER_PAY_REQUEST","put","ORDER_PAY_SUCCESS","ORDER_PAY_FAIL","deliverOrder","ORDER_DELIVER_REQUEST","_id","ORDER_DELIVER_SUCCESS","ORDER_DELIVER_FAIL","listMyOrders","ORDER_LIST_MY_REQUEST","ORDER_LIST_MY_SUCCESS","ORDER_LIST_MY_FAIL","listOrders","ORDER_LIST_REQUEST","ORDER_LIST_SUCCESS","ORDER_LIST_FAIL","Table","React","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","OrderListScreen","history","useDispatch","useSelector","state","orderList","loading","error","orders","useEffect","isAdmin","push","map","user","name","createdAt","substring","totalPrice","isPaid","paidAt","style","color","isDelivered","deliveredAt","to"],"mappings":"kWAsBaA,EAAc,SAACC,GAC1B,8CAAO,WAAOC,EAAUC,GAAjB,iBAAAC,EAAA,sEAEHF,EAAS,CAAEG,KAAMC,MACXC,EAAS,CACbC,QAAS,CACP,eAAgB,mBAChBC,cAAc,UAAD,OAAYN,IAAWO,UAAUC,SAASC,SANxD,SASoBC,IAAMC,KAAN,cAA0Bb,EAAOM,GATrD,OASGQ,EATH,OAWHb,EAAS,CAAEG,KAAMW,IAAsBC,QAASF,EAASG,OAXtD,gDAaHhB,EAAS,CACPG,KAAMc,IACNF,QACE,KAAMF,UAAY,KAAMA,SAASG,KAAKE,QAClC,KAAML,SAASG,KAAKE,QACpB,KAAMA,UAlBX,yDAAP,yDAwBWC,EAAkB,SAACC,GAC9B,8CAAO,WAAOpB,EAAUC,GAAjB,iBAAAC,EAAA,sEAEHF,EAAS,CAAEG,KAAMkB,MACXhB,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,IAAWO,UAAUC,SAASC,SALxD,SAQoBC,IAAMW,IAAN,sBAAyBF,GAAMf,GARnD,OAQGQ,EARH,OAUHb,EAAS,CAAEG,KAAMoB,IAAuBR,QAASF,EAASG,OAVvD,gDAYHhB,EAAS,CACPG,KAAMqB,IACNT,QACE,KAAMF,UAAY,KAAMA,SAASG,KAAKE,QAClC,KAAML,SAASG,KAAKE,QACpB,KAAMA,UAjBX,yDAAP,yDAuBWO,EAAW,SAACC,EAASC,GAChC,8CAAO,WAAO3B,EAAUC,GAAjB,iBAAAC,EAAA,sEAEHF,EAAS,CAAEG,KAAMyB,MACXvB,EAAS,CACbC,QAAS,CACP,eAAgB,mBAChBC,cAAc,UAAD,OAAYN,IAAWO,UAAUC,SAASC,SANxD,SASoBC,IAAMkB,IAAN,sBACNH,EADM,QAErBC,EACAtB,GAZC,OASGQ,EATH,OAeHb,EAAS,CAAEG,KAAM2B,IAAmBf,QAASF,EAASG,OAfnD,gDAiBHhB,EAAS,CACPG,KAAM4B,IACNhB,QACE,KAAMF,UAAY,KAAMA,SAASG,KAAKE,QAClC,KAAML,SAASG,KAAKE,QACpB,KAAMA,UAtBX,yDAAP,yDA4BWc,EAAe,SAACjC,GAC3B,8CAAO,WAAOC,EAAUC,GAAjB,iBAAAC,EAAA,sEAEHF,EAAS,CAAEG,KAAM8B,MACX5B,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,IAAWO,UAAUC,SAASC,SALxD,SAQoBC,IAAMkB,IAAN,sBACN9B,EAAMmC,IADA,YAErB,GACA7B,GAXC,OAQGQ,EARH,OAcHb,EAAS,CAAEG,KAAMgC,IAAuBpB,QAASF,EAASG,OAdvD,gDAgBHhB,EAAS,CACPG,KAAMiC,IACNrB,QACE,KAAMF,UAAY,KAAMA,SAASG,KAAKE,QAClC,KAAML,SAASG,KAAKE,QACpB,KAAMA,UArBX,yDAAP,yDA2BWmB,EAAe,WAC1B,8CAAO,WAAOrC,EAAUC,GAAjB,iBAAAC,EAAA,sEAEHF,EAAS,CAAEG,KAAMmC,MACXjC,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,IAAWO,UAAUC,SAASC,SALxD,SAQoBC,IAAMW,IAAN,uBAAkCjB,GARtD,OAQGQ,EARH,OAUHb,EAAS,CAAEG,KAAMoC,IAAuBxB,QAASF,EAASG,OAVvD,gDAYHhB,EAAS,CACPG,KAAMqC,IACNzB,QACE,KAAMF,UAAY,KAAMA,SAASG,KAAKE,QAClC,KAAML,SAASG,KAAKE,QACpB,KAAMA,UAjBX,yDAAP,yDAuBWuB,EAAa,WACxB,8CAAO,WAAOzC,EAAUC,GAAjB,iBAAAC,EAAA,sEAEHF,EAAS,CAAEG,KAAMuC,MACXrC,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,IAAWO,UAAUC,SAASC,SALxD,SAQoBC,IAAMW,IAAN,cAAyBjB,GAR7C,OAQGQ,EARH,OAUHb,EAAS,CAAEG,KAAMwC,IAAoB5B,QAASF,EAASG,OAVpD,gDAYHhB,EAAS,CACPG,KAAMyC,IACN7B,QACE,KAAMF,UAAY,KAAMA,SAASG,KAAKE,QAClC,KAAML,SAASG,KAAKE,QACpB,KAAMA,UAjBX,yDAAP,0D,iCCzJF,yDAKI2B,EAAqBC,IAAMC,YAAW,SAAUC,EAAMC,GACxD,IAAIC,EAAWF,EAAKE,SAChBC,EAAYH,EAAKG,UACjBC,EAAUJ,EAAKI,QACfC,EAAWL,EAAKK,SAChBC,EAAaN,EAAKM,WAClBC,EAAQP,EAAKO,MACbC,EAAOR,EAAKQ,KACZC,EAAUT,EAAKS,QACfC,EAAaV,EAAKU,WAClBC,EAAQC,YAA8BZ,EAAM,CAAC,WAAY,YAAa,UAAW,WAAY,aAAc,QAAS,OAAQ,UAAW,eAEvIa,EAAoBC,YAAmBZ,EAAU,SACjDa,EAAUC,IAAWb,EAAWU,EAAmBJ,GAAWI,EAAoB,IAAMJ,EAASD,GAAQK,EAAoB,IAAML,EAAMJ,GAAWS,EAAoB,WAAYR,GAAYQ,EAAoB,YAAaP,GAAcO,EAAoB,cAAeN,GAASM,EAAoB,UAC/SI,EAAqBnB,IAAMoB,cAAc,QAASC,YAAS,GAAIR,EAAO,CACxER,UAAWY,EACXd,IAAKA,KAGP,GAAIS,EAAY,CACd,IAAIU,EAAkBP,EAAoB,cAM1C,MAJ0B,kBAAfH,IACTU,EAAkBA,EAAkB,IAAMV,GAGxBZ,IAAMoB,cAAc,MAAO,CAC7Cf,UAAWiB,GACVH,GAGL,OAAOA,KAEMpB,O,iCCtCf,mFA8EewB,UAtES,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACnBtE,EAAWuE,cADsB,EAEJC,aAAY,SAACC,GAAD,OAAWA,EAAMC,aAAxDC,EAF+B,EAE/BA,QAASC,EAFsB,EAEtBA,MAAOC,EAFe,EAEfA,OAChBpE,EAAa+D,aAAY,SAACC,GAAD,OAAWA,EAAMjE,aAA1CC,SAUR,OARAqE,qBAAU,WACJrE,GAAYA,EAASsE,QACvB/E,EAASyC,eAET6B,EAAQU,KAAK,YAEd,CAACvE,EAAUT,EAAUsE,IAGtB,qCACE,wCACCK,EACC,cAAC,IAAD,IACEC,EACF,cAAC,IAAD,CAASnB,QAAQ,SAAjB,SAA2BmB,IAE3B,eAAC,IAAD,CAAOxB,SAAO,EAACC,UAAQ,EAACE,OAAK,EAACG,YAAU,EAACP,UAAU,WAAnD,UACE,gCACE,+BACE,oCACA,sCACA,sCACA,uCACA,sCACA,2CACA,4BAGJ,gCACG0B,EAAOI,KAAI,SAAClF,GAAD,OACV,+BACE,6BAAKA,EAAMmC,MACX,6BAAKnC,EAAMmF,MAAQnF,EAAMmF,KAAKC,OAC9B,6BAAKpF,EAAMqF,UAAUC,UAAU,EAAG,MAClC,mCAAMtF,EAAMuF,cACZ,6BACGvF,EAAMwF,OACLxF,EAAMyF,OAAOH,UAAU,EAAG,IAE1B,mBAAGlC,UAAU,eAAesC,MAAO,CAAEC,MAAO,WAGhD,6BACG3F,EAAM4F,YACL5F,EAAM6F,YAAYP,UAAU,EAAG,IAE/B,mBAAGlC,UAAU,eAAesC,MAAO,CAAEC,MAAO,WAGhD,6BACE,cAAC,gBAAD,CAAeG,GAAE,iBAAY9F,EAAMmC,IAAlB,SAAjB,SACE,cAAC,IAAD,CAAQuB,QAAQ,QAAQN,UAAU,SAAlC,2BArBGpD,EAAMmC","file":"static/js/8.8755cc86.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport {\r\n  ORDER_CREATE_FAIL,\r\n  ORDER_CREATE_REQUEST,\r\n  ORDER_CREATE_SUCCESS,\r\n  ORDER_DELIVER_FAIL,\r\n  ORDER_DELIVER_REQUEST,\r\n  ORDER_DELIVER_SUCCESS,\r\n  ORDER_DETAILS_FAIL,\r\n  ORDER_DETAILS_REQUEST,\r\n  ORDER_DETAILS_SUCCESS,\r\n  ORDER_LIST_FAIL,\r\n  ORDER_LIST_MY_FAIL,\r\n  ORDER_LIST_MY_REQUEST,\r\n  ORDER_LIST_MY_SUCCESS,\r\n  ORDER_LIST_REQUEST,\r\n  ORDER_LIST_SUCCESS,\r\n  ORDER_PAY_FAIL,\r\n  ORDER_PAY_REQUEST,\r\n  ORDER_PAY_SUCCESS,\r\n} from './actionTypes';\r\n\r\nexport const createOrder = (order) => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ORDER_CREATE_REQUEST });\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${getState().userLogin.userInfo.token}`,\r\n        },\r\n      };\r\n      const response = await axios.post(`/api/orders`, order, config);\r\n\r\n      dispatch({ type: ORDER_CREATE_SUCCESS, payload: response.data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: ORDER_CREATE_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const getOrderDetails = (id) => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ORDER_DETAILS_REQUEST });\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${getState().userLogin.userInfo.token}`,\r\n        },\r\n      };\r\n      const response = await axios.get(`/api/orders/${id}`, config);\r\n\r\n      dispatch({ type: ORDER_DETAILS_SUCCESS, payload: response.data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: ORDER_DETAILS_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const payOrder = (orderId, paymentResult) => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ORDER_PAY_REQUEST });\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${getState().userLogin.userInfo.token}`,\r\n        },\r\n      };\r\n      const response = await axios.put(\r\n        `/api/orders/${orderId}/pay`,\r\n        paymentResult,\r\n        config\r\n      );\r\n\r\n      dispatch({ type: ORDER_PAY_SUCCESS, payload: response.data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: ORDER_PAY_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const deliverOrder = (order) => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ORDER_DELIVER_REQUEST });\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${getState().userLogin.userInfo.token}`,\r\n        },\r\n      };\r\n      const response = await axios.put(\r\n        `/api/orders/${order._id}/deliver`,\r\n        {},\r\n        config\r\n      );\r\n\r\n      dispatch({ type: ORDER_DELIVER_SUCCESS, payload: response.data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: ORDER_DELIVER_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const listMyOrders = () => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ORDER_LIST_MY_REQUEST });\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${getState().userLogin.userInfo.token}`,\r\n        },\r\n      };\r\n      const response = await axios.get(`/api/orders/myorders`, config);\r\n\r\n      dispatch({ type: ORDER_LIST_MY_SUCCESS, payload: response.data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: ORDER_LIST_MY_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const listOrders = () => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ORDER_LIST_REQUEST });\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${getState().userLogin.userInfo.token}`,\r\n        },\r\n      };\r\n      const response = await axios.get(`/api/orders`, config);\r\n\r\n      dispatch({ type: ORDER_LIST_SUCCESS, payload: response.data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: ORDER_LIST_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Button, Table } from 'react-bootstrap';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport { listOrders } from '../store/actions/orderActions';\r\n\r\nconst OrderListScreen = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n  const { loading, error, orders } = useSelector((state) => state.orderList);\r\n  const { userInfo } = useSelector((state) => state.userLogin);\r\n\r\n  useEffect(() => {\r\n    if (userInfo && userInfo.isAdmin) {\r\n      dispatch(listOrders());\r\n    } else {\r\n      history.push('/login');\r\n    }\r\n  }, [userInfo, dispatch, history]);\r\n\r\n  return (\r\n    <>\r\n      <h1>Orders</h1>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\">{error}</Message>\r\n      ) : (\r\n        <Table striped bordered hover responsive className=\"table-sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>USER</th>\r\n              <th>DATE</th>\r\n              <th>TOTAL</th>\r\n              <th>PAID</th>\r\n              <th>DELIVERED</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {orders.map((order) => (\r\n              <tr key={order._id}>\r\n                <td>{order._id}</td>\r\n                <td>{order.user && order.user.name}</td>\r\n                <td>{order.createdAt.substring(0, 10)}</td>\r\n                <td>${order.totalPrice}</td>\r\n                <td>\r\n                  {order.isPaid ? (\r\n                    order.paidAt.substring(0, 10)\r\n                  ) : (\r\n                    <i className=\"fas fa-times\" style={{ color: 'red' }}></i>\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {order.isDelivered ? (\r\n                    order.deliveredAt.substring(0, 10)\r\n                  ) : (\r\n                    <i className=\"fas fa-times\" style={{ color: 'red' }}></i>\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  <LinkContainer to={`/order/${order._id}/edit`}>\r\n                    <Button variant=\"light\" className=\"btn-sm\">\r\n                      Details\r\n                    </Button>\r\n                  </LinkContainer>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderListScreen;\r\n"],"sourceRoot":""}