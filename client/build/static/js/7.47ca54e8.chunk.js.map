{"version":3,"sources":["store/actions/cartActions.js","../node_modules/react-bootstrap/esm/ListGroupItem.js","../node_modules/react-bootstrap/esm/ListGroup.js","screens/CartScreen.js"],"names":["addToCart","id","qty","dispatch","getState","a","axios","get","response","type","CART_ADD_ITEM","payload","product","data","_id","name","image","price","countInStock","localStorage","setItem","JSON","stringify","cart","cartItems","removeFromCart","CART_REMOVE_ITEM","saveShippingAddress","CART_SAVE_SHIPPING_ADDRESS","savePaymentMethod","CART_SAVE_PAYMENT_METHOD","defaultProps","variant","undefined","active","disabled","ListGroupItem","React","forwardRef","_ref","ref","bsPrefix","className","action","as","eventKey","onClick","props","_objectWithoutPropertiesLoose","useBootstrapPrefix","handleClick","useCallback","event","preventDefault","stopPropagation","tabIndex","createElement","AbstractNavItem","_extends","makeEventKey","href","classNames","displayName","horizontal","ListGroup","horizontalVariant","_useUncontrolled","useUncontrolled","activeKey","initialBsPrefix","_useUncontrolled$as","controlledProps","AbstractNav","Item","CartScreen","match","location","history","useDispatch","useSelector","state","productId","params","search","Number","split","useEffect","md","length","to","map","item","src","alt","fluid","rounded","Control","value","onChange","e","target","Array","keys","x","reduce","acc","toFixed","push"],"mappings":"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","file":"static/js/7.47ca54e8.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport {\r\n  CART_ADD_ITEM,\r\n  CART_REMOVE_ITEM,\r\n  CART_SAVE_PAYMENT_METHOD,\r\n  CART_SAVE_SHIPPING_ADDRESS,\r\n} from './actionTypes';\r\n\r\nexport const addToCart = (id, qty) => {\r\n  return async (dispatch, getState) => {\r\n    const response = await axios.get(`/api/products/${id}`);\r\n\r\n    dispatch({\r\n      type: CART_ADD_ITEM,\r\n      payload: {\r\n        product: response.data._id,\r\n        name: response.data.name,\r\n        image: response.data.image,\r\n        price: response.data.price,\r\n        countInStock: response.data.countInStock,\r\n        qty: qty,\r\n      },\r\n    });\r\n\r\n    localStorage.setItem(\r\n      'cartItems',\r\n      JSON.stringify(getState().cart.cartItems)\r\n    );\r\n  };\r\n};\r\n\r\nexport const removeFromCart = (id) => {\r\n  return async (dispatch, getState) => {\r\n    dispatch({\r\n      type: CART_REMOVE_ITEM,\r\n      payload: id,\r\n    });\r\n    localStorage.setItem(\r\n      'cartItems',\r\n      JSON.stringify(getState().cart.cartItems)\r\n    );\r\n  };\r\n};\r\n\r\nexport const saveShippingAddress = (data) => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: CART_SAVE_SHIPPING_ADDRESS,\r\n      payload: data,\r\n    });\r\n    localStorage.setItem('shippingAddress', JSON.stringify(data));\r\n  };\r\n};\r\n\r\nexport const savePaymentMethod = (data) => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: CART_SAVE_PAYMENT_METHOD,\r\n      payload: data,\r\n    });\r\n    localStorage.setItem('paymentMethod', JSON.stringify(data));\r\n  };\r\n};\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport AbstractNavItem from './AbstractNavItem';\nimport { makeEventKey } from './SelectableContext';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: undefined,\n  active: false,\n  disabled: false\n};\nvar ListGroupItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      disabled = _ref.disabled,\n      className = _ref.className,\n      variant = _ref.variant,\n      action = _ref.action,\n      as = _ref.as,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"active\", \"disabled\", \"className\", \"variant\", \"action\", \"as\", \"eventKey\", \"onClick\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'list-group-item');\n  var handleClick = useCallback(function (event) {\n    if (disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) onClick(event);\n  }, [disabled, onClick]);\n\n  if (disabled && props.tabIndex === undefined) {\n    props.tabIndex = -1;\n    props['aria-disabled'] = true;\n  }\n\n  return /*#__PURE__*/React.createElement(AbstractNavItem, _extends({\n    ref: ref\n  }, props, {\n    // TODO: Restrict eventKey to string in v5?\n    eventKey: makeEventKey(eventKey, props.href) // eslint-disable-next-line no-nested-ternary\n    ,\n    as: as || (action ? props.href ? 'a' : 'button' : 'div'),\n    onClick: handleClick,\n    className: classNames(className, bsPrefix, active && 'active', disabled && 'disabled', variant && bsPrefix + \"-\" + variant, action && bsPrefix + \"-action\")\n  }));\n});\nListGroupItem.defaultProps = defaultProps;\nListGroupItem.displayName = 'ListGroupItem';\nexport default ListGroupItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport warning from 'warning';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AbstractNav from './AbstractNav';\nimport ListGroupItem from './ListGroupItem';\nvar defaultProps = {\n  variant: undefined,\n  horizontal: undefined\n};\nvar ListGroup = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      className = _useUncontrolled.className,\n      initialBsPrefix = _useUncontrolled.bsPrefix,\n      variant = _useUncontrolled.variant,\n      horizontal = _useUncontrolled.horizontal,\n      _useUncontrolled$as = _useUncontrolled.as,\n      as = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"className\", \"bsPrefix\", \"variant\", \"horizontal\", \"as\"]);\n\n  var bsPrefix = useBootstrapPrefix(initialBsPrefix, 'list-group');\n  var horizontalVariant;\n\n  if (horizontal) {\n    horizontalVariant = horizontal === true ? 'horizontal' : \"horizontal-\" + horizontal;\n  } else {\n    horizontalVariant = null;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(horizontal && variant === 'flush'), '`variant=\"flush\"` and `horizontal` should not be used together.') : void 0;\n  return /*#__PURE__*/React.createElement(AbstractNav, _extends({\n    ref: ref\n  }, controlledProps, {\n    as: as,\n    className: classNames(className, bsPrefix, variant && bsPrefix + \"-\" + variant, horizontalVariant && bsPrefix + \"-\" + horizontalVariant)\n  }));\n});\nListGroup.defaultProps = defaultProps;\nListGroup.displayName = 'ListGroup';\nListGroup.Item = ListGroupItem;\nexport default ListGroup;","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  Row,\r\n  Col,\r\n  ListGroup,\r\n  Image,\r\n  Button,\r\n  Form,\r\n  Card,\r\n} from 'react-bootstrap';\r\nimport Message from '../components/Message';\r\n\r\nimport { addToCart, removeFromCart } from '../store/actions/cartActions';\r\n\r\nconst CartScreen = ({ match, location, history }) => {\r\n  const dispatch = useDispatch();\r\n  const { cartItems } = useSelector((state) => state.cart);\r\n\r\n  const productId = match.params.id;\r\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1; // ?qty=2\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty));\r\n    }\r\n  }, [dispatch, productId, qty]);\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    history.push('/login?redirect=shipping');\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n        {cartItems.length === 0 ? (\r\n          <Message>\r\n            Your cart is empty <Link to=\"/\">Go Back</Link>\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant=\"flush\">\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                  </Col>\r\n                  <Col md={3}>\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </Col>\r\n                  <Col md={2}>${item.price}</Col>\r\n                  <Col md={2}>\r\n                    <Form.Control\r\n                      as=\"select\"\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Col>\r\n                  <Col md={2}>\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"light\"\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n              </h2>\r\n              $\r\n              {cartItems\r\n                .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                .toFixed(2)}\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <Button\r\n                type=\"button\"\r\n                className=\"btn-block\"\r\n                disabled={cartItems.length === 0}\r\n                onClick={checkoutHandler}\r\n              >\r\n                Proceed To Checkout\r\n              </Button>\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default CartScreen;\r\n"],"sourceRoot":""}