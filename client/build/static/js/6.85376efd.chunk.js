(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{137:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return j}));var r=n(9),a=n.n(r),o=n(16),c=n(14),s=n.n(c),i=n(4),u=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n,r){var o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.f}),o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r().userLogin.userInfo.token)}},t.next=5,s.a.post("/api/orders",e,o);case 5:c=t.sent,n({type:i.g,payload:c.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:i.e,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n,r){var o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.m}),o={headers:{Authorization:"Bearer ".concat(r().userLogin.userInfo.token)}},t.next=5,s.a.get("/api/orders/".concat(e),o);case 5:c=t.sent,n({type:i.n,payload:c.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:i.l,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},l=function(e,t){return function(){var n=Object(o.a)(a.a.mark((function n(r,o){var c,u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:i.w}),c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o().userLogin.userInfo.token)}},n.next=5,s.a.put("/api/orders/".concat(e,"/pay"),t,c);case 5:u=n.sent,r({type:i.y,payload:u.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r({type:i.v,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n,r){var o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.i}),o={headers:{Authorization:"Bearer ".concat(r().userLogin.userInfo.token)}},t.next=5,s.a.put("/api/orders/".concat(e._id,"/deliver"),{},o);case 5:c=t.sent,n({type:i.k,payload:c.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:i.h,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},f=function(){return function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:i.q}),r={headers:{Authorization:"Bearer ".concat(n().userLogin.userInfo.token)}},e.next=5,s.a.get("/api/orders/myorders",r);case 5:o=e.sent,t({type:i.s,payload:o.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:i.p,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},j=function(){return function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:i.t}),r={headers:{Authorization:"Bearer ".concat(n().userLogin.userInfo.token)}},e.next=5,s.a.get("/api/orders",r);case 5:o=e.sent,t({type:i.u,payload:o.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:i.o,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()}},141:function(e,t,n){"use strict";var r=n(3),a=n(5),o=n(7),c=n.n(o),s=n(0),i=n.n(s),u=(n(34),n(23)),d=n(8),l=n(64),p=n(63),f=n(17),j={variant:void 0,active:!1,disabled:!1},b=i.a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.active,u=e.disabled,l=e.className,j=e.variant,b=e.action,h=e.as,v=e.eventKey,y=e.onClick,O=Object(a.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);n=Object(d.a)(n,"list-group-item");var m=Object(s.useCallback)((function(e){if(u)return e.preventDefault(),void e.stopPropagation();y&&y(e)}),[u,y]);return u&&void 0===O.tabIndex&&(O.tabIndex=-1,O["aria-disabled"]=!0),i.a.createElement(p.a,Object(r.a)({ref:t},O,{eventKey:Object(f.b)(v,O.href),as:h||(b?O.href?"a":"button":"div"),onClick:m,className:c()(l,n,o&&"active",u&&"disabled",j&&n+"-"+j,b&&n+"-action")}))}));b.defaultProps=j,b.displayName="ListGroupItem";var h=b,v={variant:void 0,horizontal:void 0},y=i.a.forwardRef((function(e,t){var n,o=Object(u.a)(e,{activeKey:"onSelect"}),s=o.className,p=o.bsPrefix,f=o.variant,j=o.horizontal,b=o.as,h=void 0===b?"div":b,v=Object(a.a)(o,["className","bsPrefix","variant","horizontal","as"]),y=Object(d.a)(p,"list-group");return n=j?!0===j?"horizontal":"horizontal-"+j:null,i.a.createElement(l.a,Object(r.a)({ref:t},v,{as:h,className:c()(s,y,f&&y+"-"+f,n&&y+"-"+n)}))}));y.defaultProps=v,y.displayName="ListGroup",y.Item=h;t.a=y},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalButton=void 0;var r=c(n(0)),a=c(n(27)),o=c(n(6));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,l(t).call(this,e))).state={isSdkReady:!1},n}var n,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!==typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,r=n.currency,a=n.options,o=n.amount,c=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:r||(a&&a.currency?a.currency:"USD"),value:o.toString()}}],application_context:{shipping_preference:c}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,o=t.onSuccess,c=t.createOrder,s=t.createSubscription,u=t.onApprove,d=t.style;if(!this.state.isSdkReady&&("undefined"===typeof window||void 0===window.paypal))return null;var l=window.paypal.Buttons.driver("react",{React:r.default,ReactDOM:a.default}),p=n&&!c?function(t,n){return e.createOrder(t,n)}:function(e,t){return c(e,t)};return r.default.createElement(l,i({},this.props,{createOrder:s?void 0:p,createSubscription:s,onApprove:o?function(t,n){return e.onApprove(t,n)}:function(e,t){return u(e,t)},style:d}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,r=t.onButtonReady,a=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();a.push("".concat(t,"=").concat(n[e]))}));var o=document.createElement("script");o.type="text/javascript",o.src="https://www.paypal.com/sdk/js?".concat(a.join("&")),o.async=!0,o.onload=function(){e.setState({isSdkReady:!0}),r&&r()},o.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(o)}}])&&u(n.prototype,o),c&&u(n,c),t}(r.default.Component);t.PayPalButton=j,f(j,"propTypes",{amount:o.default.oneOfType([o.default.number,o.default.string]),currency:o.default.oneOfType([o.default.number,o.default.string]),shippingPreference:o.default.string,onSuccess:o.default.func,catchError:o.default.func,onError:o.default.func,createOrder:o.default.func,createSubscription:o.default.func,onApprove:o.default.func,style:o.default.object,options:o.default.shape({clientId:o.default.string,merchantId:o.default.string,currency:o.default.oneOfType([o.default.number,o.default.string]),intent:o.default.string,commit:o.default.oneOfType([o.default.bool,o.default.string]),vault:o.default.oneOfType([o.default.bool,o.default.string]),component:o.default.string,disableFunding:o.default.string,disableCard:o.default.string,integrationDate:o.default.string,locale:o.default.string,buyerCountry:o.default.string,debug:o.default.oneOfType([o.default.bool,o.default.string])}),onButtonReady:o.default.func}),f(j,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},151:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n.n(r),o=n(16),c=n(61),s=n(0),i=n(22),u=n(128),d=n(78),l=n(141),p=n(129),f=n(135),j=n(79),b=n(21),h=n(142),v=n(14),y=n.n(v),O=n(13),m=n(137),x=n(45),g=n(4),w=n(1);t.default=function(e){var t,n=e.match,r=e.history,v=Object(s.useState)(!1),k=Object(c.a)(v,2),P=k[0],I=k[1],S=Object(b.b)(),_=Object(b.c)((function(e){return e.orderDetails})),A=_.order,E=_.loading,C=_.error,B=Object(b.c)((function(e){return e.userLogin})).userInfo,D=Object(b.c)((function(e){return e.orderPay})),T=D.loading,R=D.success,L=Object(b.c)((function(e){return e.orderDeliver})),N=L.loading,z=L.success,M=n.params.id;if(!E){A.itemsPrice=(t=null===A||void 0===A?void 0:A.orderItems.reduce((function(e,t){return e+t.price*t.qty}),0),(Math.round(100*t)/100).toFixed(2))}Object(s.useEffect)((function(){B||r.push("/login");var e=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/config/paypal");case 2:t=e.sent,n=t.data,(r=document.createElement("script")).type="text/javascript",r.src="https://www.paypal.com/sdk/js?client-id=".concat(n,"&locale=en_US"),r.async=!0,r.onload=function(){I(!0)},document.body.appendChild(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!A||R||z?(S({type:g.x}),S({type:g.j}),S(Object(m.c)(M))):A.isPaid||(window.paypal?I(!0):e())}),[S,M,R,A,z,r,B]);return E?Object(w.jsx)(O.a,{}):C?Object(w.jsx)(x.a,{variant:"danger",children:C}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h1",{children:["Order ",null===A||void 0===A?void 0:A._id]}),Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{md:8,children:Object(w.jsxs)(l.a,{variant:"flush",children:[Object(w.jsxs)(l.a.Item,{children:[Object(w.jsx)("h2",{children:"Shipping"}),Object(w.jsxs)("p",{children:[Object(w.jsx)("strong",{children:"Name : "}),A.user.name]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("strong",{children:"Email : "}),Object(w.jsx)("a",{href:"mailto:".concat(A.user.email),children:A.user.email})]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("strong",{children:"Address : "}),null===A||void 0===A?void 0:A.shippingAddress.address,",",null===A||void 0===A?void 0:A.shippingAddress.city,",",null===A||void 0===A?void 0:A.shippingAddress.postalCode,",",null===A||void 0===A?void 0:A.shippingAddress.country]}),(null===A||void 0===A?void 0:A.isDelivered)?Object(w.jsxs)(x.a,{variant:"success",children:["Delivered on ",A.deliveredAt]}):Object(w.jsx)(x.a,{variant:"danger",children:"Not Delivered"})]}),Object(w.jsxs)(l.a.Item,{children:[Object(w.jsx)("h2",{children:"Payment Method"}),Object(w.jsxs)("p",{children:[Object(w.jsx)("strong",{children:"Method : "}),null===A||void 0===A?void 0:A.paymentMethod]}),(null===A||void 0===A?void 0:A.isPaid)?Object(w.jsxs)(x.a,{variant:"success",children:["Paid on ",A.paidAt]}):Object(w.jsx)(x.a,{variant:"danger",children:"Not Paid"})]}),Object(w.jsxs)(l.a.Item,{children:[Object(w.jsx)("h2",{children:"Order Items"}),0===(null===A||void 0===A?void 0:A.orderItems.length)?Object(w.jsx)(x.a,{children:"Order is empty"}):Object(w.jsx)(l.a,{variant:"flush",children:null===A||void 0===A?void 0:A.orderItems.map((function(e,t){return Object(w.jsx)(l.a.Item,{children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{md:1,children:Object(w.jsx)(p.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(w.jsx)(d.a,{children:Object(w.jsx)(i.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(w.jsxs)(d.a,{md:4,children:[e.qty," x $",e.price," = $",e.qty*e.price]})]})},t)}))})]})]})}),Object(w.jsx)(d.a,{md:4,children:Object(w.jsx)(f.a,{children:Object(w.jsxs)(l.a,{variant:"flush",children:[Object(w.jsx)(l.a.Item,{children:Object(w.jsx)("h2",{children:"Order Summary"})}),Object(w.jsx)(l.a.Item,{children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{children:"Items"}),Object(w.jsxs)(d.a,{children:["$",null===A||void 0===A?void 0:A.itemsPrice]})]})}),Object(w.jsx)(l.a.Item,{children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{children:"Shipping"}),Object(w.jsxs)(d.a,{children:["$",null===A||void 0===A?void 0:A.shippingPrice]})]})}),Object(w.jsx)(l.a.Item,{children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{children:"Tax"}),Object(w.jsxs)(d.a,{children:["$",null===A||void 0===A?void 0:A.taxPrice]})]})}),Object(w.jsx)(l.a.Item,{children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(d.a,{children:"Total"}),Object(w.jsxs)(d.a,{children:["$",null===A||void 0===A?void 0:A.totalPrice]})]})}),!A.isPaid&&Object(w.jsxs)(l.a.Item,{children:[T&&Object(w.jsx)(O.a,{}),P?Object(w.jsx)(h.PayPalButton,{amount:A.totalPrice,onSuccess:function(e){console.log(e),S(Object(m.f)(M,e))}}):Object(w.jsx)(O.a,{})]}),N&&Object(w.jsx)(O.a,{}),B&&B.isAdmin&&A.isPaid&&!A.isDelivered&&Object(w.jsx)(l.a.Item,{children:Object(w.jsx)(j.a,{type:"button",className:"btn btn-block",onClick:function(){S(Object(m.b)(A))},children:"Mark as Delivered"})})]})})})]})]})}}}]);
//# sourceMappingURL=6.85376efd.chunk.js.map